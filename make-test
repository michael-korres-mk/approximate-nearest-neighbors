# Compiler
CXX = g++
CXXFLAGS = -O2 -std=c++17 -g

SRCS = src/main/cpp

TEST_SOURCES = $(wildcard tests/*)
TEST_EXECUTABLES = $(patsubst %.cpp,build/%,$(TEST_SOURCES))

build/%: $(wildcard $(SRCS)/utility/*.cpp)
	$(CXX) $(CFLAGS) $< $(wildcard $(SRCS)/utility/*.cpp) -o $@

# Target: all (default target)
all: $(TEST_EXECUTABLES)

tests: $(TEST_EXECUTABLES)
	@for test in $(TEST_EXECUTABLES); do \
		echo "Running $$test"; \
		$$test; \
	done

clean:
	rm -f $(TEST_EXECUTABLE)
